\documentclass[11pt, letterpaper]{article}
\usepackage[]{hyperref}
\bibliographystyle{apalike}
\title{Lab rotation report: Escape behaviour in mice}
\author{Max Bardelang}
\date{December 2025}

\begin{document}
% TITLE PAGE -----------------------------------------------------------

\begin{center}
	\thispagestyle{empty}
	
	\LARGE{Graduate School of Computational Neuroscience}\\
	\LARGE{University of TÃ¼bingen}\\
	
	\vspace{3cm}
	
	\LARGE{\textbf{Escape behaviour in mice}}\\[-0.5ex]
	
	\vspace{6cm}
	
	\large{Laboratory report \par}
	\large{presented by \par}
	\large{Max Bardelang}
	
	\vspace{1.6cm}
	
	The study was supervised by \par
	Prof. Dr. Burgalossi, Florian Hofmann\par
	Werner Reichardt Centre for Integrative Neuroscience\\
	Neural Circuits and Behavior group\\
		
	\vspace{1.6cm}
	
	Duration of the lab rotation: 9 weeks \par
	Deadline for submission: 15.12.2025
	
\end{center}

\pagebreak


% ABSTRACT ---
\begin{abstract}
	The anterior dorsal nucleus plays a important role in relaying sensory information. Its exact function however is unclear.
\end{abstract}
\thispagestyle{empty}
\newpage

\tableofcontents
\thispagestyle{empty}
\newpage

% INTRODUCTION
\section{Introduction}
% "chain of reasoning that led to the question or hypothesis your study addresses"
% Whats in the introduction
This aim of this project is to pilot a experimental environment and analysis pipeline for a planned study on head direction cells in the anterior dorsal nucleus. The neuroscientific background of this study will be introduced concisely to provide a background for understanding the experimental design.


\subsection{Head direction cells of the anterior dorsal nucleus}
% From neuroscientific background to experimental design
% HD cells in anterior thalamic nucleus


\subsection{Escape behaviour in mice}
% What is escape
Escape behaviour in mice \cite{BrancoEscapeBehavuour2025} is a rapid, stereotyped and ethologically relevant defensive action that is triggered when a sensory stimulus signals imminent danger. Behaviourally, escape typically consists of a brief latency followed by an abrupt initiation of high-speed locomotion, often preceded by a short orienting or freezing phase. Once escape is initiated, mice generate a directed movement that increases distance from the perceived threat and, when available, orientation toward a place of safety. In laboratory paradigms, animals reorient their head and body axis toward a previously learned shelter location, even when the shelter is not visible at the time of threat, indicating that spatial information is rapidly accessed at escape onset. After onset, escape is sustained until the animal reaches shelter, highlighting that escape behaviour is not a reflexive turn-and-run, but a temporally structured sequence comprising fast initiation, goal-directed reorientation, and continued locomotion until safety is achieved.
\\


\subsection{Project description and goal}
% Story: The piloted study wants to compare accuracy of reorientation during escape and how this results in the variables we are measuring

% Goal of piloted study
Goal: Whether and how the anterior dorsal nucleus is involved in spatial episodic memory formation.
To asses, whether and how the head direction cells of the anterior dorsal nucleus is involved in spatial episodic memory formation

% How this higher goal is transferred to this project
% Task description
% Head direction, homing vector.
Reorientation accuracy is measured as the difference between the head direction vector and the homing vector of the mouse after reorientation during escape.

The goal of the project is to set up a experiment measuring the underlying variables head direction and homing vector during the time course of escape trials of mice.

This task is divided into to major requirements. First, a environment has to be created, in which escape behaviour in the mice can be initiated and recorded. Second, a analysis pipeline has to be implemented, that takes these recordings as input and extracts head direction and homing vector along the time axis of individual trials. Both of these variables can be calculated from the position of both ears and the nose at each respective time point, with the exact geometry of this calculation down described down below. To allow scaling the analysis to extended periods of time and to multiple animals, pose tracking of these bodyparts has to be automated, to which a Convolutional Neural Network (CNN) for computer vision is employed.



% MATERIALS AND METHODS
\section{Materials and Methods}


\subsection{Experimental setup}
% Arena
All trials were performed in a elevated circular arena made of solid plastic of ~90cm in diameter. The shelter was mounted at the border of the arena, so the upper edge aligned with the arena surface.


%Experimental setup
Data was recorded using Spike2 (Cambridge Electronic Design Limited), which controlled camera and speakers. Sound stimuli were send by the program after a button press from the experimenter and reached sound pressure levels of 65-80 dB at the centre of the arena. TTL triggers for controlling frames were sent to the camera at a frame rate of 25 per second. Spike2 recordings were exported and converted to .mat format.


\subsection{Mice}

\subsection{Pose tracking}
Pose tracking of left ear, right ear and nose was performed using the software package DeepLabCut 3.0.0rc9(DLC) \cite[]{Nath2019} for Python 3.10 to train a CNN for pose estimation. Code with detailed descriptions can be found in \autoref{A}.\\

A training data set of 200 uncropped images, selected by DLC's automatic k-means frames extraction method from recordings of the first three mice, was selected and manually labeled. Importantly, this training set does not yet include mice under the second camera lens introduced in recordings of subsequent mice. DLC offes pretrained weight initialisations with corresponding models fitted to different scenarios of pose tracking. The weight initialisation pretrained to a overhead view of mice (SuperAnimal-TopViewMouse)\cite{Ye_2024} was choosen, in combination with a underlying HRNet-w32 architecture and the default image augmentation method albumentations.\\


Labeling data was performed on a desktop-PC, due to the requirement of a graphical user interface. All subsequent steps for pose tracking were run on the Cluster of the Werner Reichardt Centre for Integrative Neuroscience, where model training was performed using a NVIDIA A100 40GB.\\


Pose tracking on a recording yields both the estimated coordinates by the model as well the confidence of the model in this estimation as a scalar in the range of [0, 1].
% Maybe look up threshold below which DLC puts points to generic posistion at corner.

% Synchronizing trigger data and video recordings



\subsection{Homing vector analysis}
Homing vector analysis was run using Python 3.10 and pandas 2.3.3. Trials were segmented to contain 1000ms prestimulus and 5000 ms poststimulus intervals, and the corresponding number of frames (6s * 25 frames/s = 150 frames) were extracted per trial. Shelter position was manually determined for each mouse, as its exact pixel position within the frame changed slightly between recording sessions of different mice.

At each timepoint, head center position was calculated as the midpoint between the ears, head direction as the vector from head centre to nose, and homing vector as the vector from head centre to nose. To asses reorientation accuracy, the absolute difference between head direction and homing vector was calculated. 


% RESULTS
\section{Results}
% DISCUSSION

% ACKNOWLEDGEMENTS

% LITERATURE
\bibliography{./references}

\appendix
\section{DeepLabCut commands}\label{A}
Initializing the dataset has to be run on the cluster as well, as models are downloaded during this step.

\end{document}
